<!DOCTYPE html>

<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

        <title>DaedalusX64</title>
        <link rel="shortcut icon" href="favicon.ico">
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>

    <body>
        <!-- Navigation Bar -->
        <ul>
            <li><a class="active">Home</a></li>
            <br>
            <li><a href="compatibility/index.html">Compatibility List</a></li>
        </ul>
        
        <div class="content">
            
            <center>
                <img src="logo.png">
                <h2 style="margin-top: 2px">Nintendo 64 Emulator for the PlayStation Portable </h2>
            </center>

                <p class="paragraph">
                    DaedalusX64 is a multiplatform Nintendo 64 Emulator, currently functioning on
                    PSP, PS Vita, and Linux, with support for more platforms planned. The PSP port
                    is noteworthy for being the fastest N64 Emulator on the platform, achieving close
                    to or even full speed in many titles.
                </p>
            
                <br>

                <center id="verinfo">
                    <h3>DaedalusX64 1.1.7 Performance Tests</h3>
                    <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/gB7LLZX5_lc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </center>

                <center>
                    <a href="https://github.com/DaedalusX64/daedalus/releases/latest"><img width="30%" src="tempbutton.png"/></a>
                </center>

                <!-- Use GitHub API to retrieve latest version number, create H3 tag for it -->
                <script>
                    // Send GET request to try and obtain the JSON
                    var request = new XMLHttpRequest();
                    request.open('GET', 'https://api.github.com/repos/DaedalusX64/daedalus/releases/latest', true);
                    request.send(null);

                    // Verify we got it
                    request.onreadystatechange = function () {
                        if (request.readyState === 4 && request.status === 200) {
                            var type = request.getResponseHeader('Content-Type');
                            if (type.indexOf("text") !== 1) {
                                var json = JSON.parse(request.responseText);

                                // Send version number
                                appendPage(json.tag_name);
                            }
                        }
                        //FIXME - this failsafe.. FAILS!
                        /* else { // We don't got it?!
                            // Send (clearly broken) version number
                            appendPage("ERR: Couldn't retrieve version number!");
                        }*/
                    }

                    // Messy messy but let's keep it anyway..
                    // All we do here is add the version number and the GitHub link to the page
                    function appendPage(versionNumber) {
                        var para = document.createElement("h3");
                        var node = document.createTextNode("The latest version of DaedalusX64, " + versionNumber + ", can be downloaded here:");
                        para.appendChild(node);
                        var element = document.getElementById("verinfo");
                        element.appendChild(para);
                    }
                    
                </script>
            
        </div>
    </body>
</html>